<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>ShipFit - Zeeland Refinery</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f6f8; margin: 0; padding: 0; }
    header { background: #1976d2; color: white; padding: 20px 0; text-align: center; }
    header img { height: 40px; vertical-align: middle; margin-right: 15px; }
    header h1 { display: inline; font-size: 1.8rem; margin: 0; vertical-align: middle; }
    
    .container { max-width: 900px; margin: 30px auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    
    .row-flex { display: flex; gap: 20px; margin-bottom: 15px; flex-wrap: wrap; }
    .form-group { flex: 1; min-width: 200px; display: flex; flex-direction: column; }
    .form-group label { margin-bottom: 6px; font-weight: 600; color: #333; font-size: 0.9rem; }
    .form-group input, .form-group select { padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
    
    .buttons { display: flex; justify-content: center; gap: 15px; margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
    .buttons button { padding: 12px 24px; border: none; border-radius: 5px; color: #fff; cursor: pointer; font-weight: bold; transition: 0.2s; }
    .btn-check { background: #1976d2; }
    .btn-check:hover { background: #0d47a1; }
    .btn-print { background: #455a64; }
    .btn-print:hover { background: #263238; }
    .btn-reset { background: #f44336; }

    #resultaten { margin-top: 30px; }
    .result-item { flex: 1; padding: 12px; border-radius: 4px; font-weight: 500; text-align: center; }
    .result-ok { background: #e8f5e9; border: 1px solid #81c784; color: #2e7d32; }
    .result-error { background: #ffebee; border: 1px solid #ef9a9a; color: #c62828; }
    
    .arm-container { margin-top: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 6px; }
    .arm-row { display: flex; gap: 10px; margin-top: 10px; }
    .arm-block { flex: 1; padding: 15px 5px; border-radius: 4px; text-align: center; font-weight: bold; border: 1px solid #ccc; }

    .summary-header { text-align: center; margin-bottom: 20px; padding: 15px; border-radius: 6px; }

    /* Print settings */
    @media print {
      body { background: white; }
      .container { box-shadow: none; margin: 0; width: 100%; max-width: none; }
      #afmeer-form, .buttons, header img { display: none; }
      .result-item, .arm-block, .summary-header { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>
<body onload="validatePassword()">

<header>
  <h1>ShipFit - Compatibility Check</h1>
</header>

<div class="container">
  <form id="afmeer-form" onsubmit="return false;">
    <div class="row-flex">
      <div class="form-group">
        <label>Scheepsnaam</label>
        <input id="shipName" type="text" placeholder="Naam schip">
      </div>
      <div class="form-group">
        <label>IMO-nummer</label>
        <input id="imo" type="text" pattern="\d{7}" maxlength="7" placeholder="1234567">
      </div>
      <div class="form-group">
        <label>Afmeren over:</label>
        <select id="mooringSide">
          <option value="SB">Stuurboord (SB)</option>
          <option value="PS">Bakboord (PS)</option>
        </select>
      </div>
    </div>

    <div class="row-flex">
      <div class="form-group">
        <label>LOA (1.27) [m]</label>
        <input id="loa" type="number" step="0.01" placeholder="100 - 280">
      </div>
      <div class="form-group">
        <label>Totaal Parallel Body (1.34) [m]</label>
        <input id="pbTotal" type="number" step="0.01" placeholder="Min 50">
      </div>
    </div>

    <div class="row-flex">
      <div class="form-group">
        <label>Forward Parallel Body [m]</label>
        <input id="fwd" type="number" step="0.01">
      </div>
      <div class="form-group">
        <label>Aft Parallel Body [m]</label>
        <input id="aft" type="number" step="0.01">
      </div>
    </div>

    <div class="row-flex">
      <div class="form-group">
        <label>Freeboard normal bal. (1.39) [m]</label>
        <input id="freeboard" type="number" step="0.01" placeholder="Max 14.4">
      </div>
      <div class="form-group">
        <label>Manifold Hoogte (8.24) [m]</label>
        <input id="manifold" type="number" step="0.01" placeholder="Max 16.4">
      </div>
      <div class="form-group">
        <label>Summer Deadweight [t]</label>
        <input id="deadweight" type="number" step="0.01" placeholder="Max 130000">
      </div>
    </div>

    <div class="buttons">
      <button type="button" class="btn-check" onclick="checkAfmeren()">Controleer</button>
      <button type="button" class="btn-reset" onclick="location.reload()">Reset</button>
      <button type="button" class="btn-print" onclick="window.print()">Print naar PDF</button>
    </div>
  </form>

  <div id="resultaten"></div>
</div>

<script>
  function validatePassword() {
    const pw = prompt('Voer wachtwoord in om ShipFit te openen:');
    if (pw !== '445501') { document.body.innerHTML = '<h1 style="text-align:center; margin-top:50px;">Toegang geweigerd</h1>'; }
  }

  function checkAfmeren() {
    const shipName = document.getElementById('shipName').value || "Onbekend schip";
    const side = document.getElementById('mooringSide').value;
    const fwd = parseFloat(document.getElementById('fwd').value) || 0;
    const aft = parseFloat(document.getElementById('aft').value) || 0;
    const pb = parseFloat(document.getElementById('pbTotal').value) || 0;
    const loa = parseFloat(document.getElementById('loa').value) || 0;
    const freeboard = parseFloat(document.getElementById('freeboard').value) || 0;
    const manifold = parseFloat(document.getElementById('manifold').value) || 0;
    const deadweight = parseFloat(document.getElementById('deadweight').value) || 0;

    let hasError = false;
    const timestamp = new Date().toLocaleString('nl-NL');
    let html = `<h3>Inspectie Rapport: ${shipName}</h3><p>Datum: ${timestamp} | Zijde: ${side}</p>`;

    // Checks
    const pbOk = pb >= 50;
    const loaOk = (loa >= 100 && loa <= 280);
    const sumDiff = Math.abs((fwd + aft) - pb);
    const sumOk = sumDiff <= 1.0;
    const fbOk = freeboard <= 14.4;
    const mfOk = manifold <= 16.4;
    const dwOk = deadweight <= 130000;

    if(!pbOk || !loaOk || !sumOk || !fbOk || !mfOk || !dwOk) hasError = true;

    // Summary Header
    const statusClass = hasError ? 'result-error' : 'result-ok';
    const statusText = hasError ? 'NIET COMPATIBEL - ACTIE VEREIST' : 'COMPATIBEL - VEILIG AFMEREN MOGELIJK';
    html += `<div class="summary-header ${statusClass}"><h2>${statusText}</h2></div>`;

    // Row 1: Afmetingen
    html += `<div class="row-flex">
      <div class="result-item ${pbOk ? 'result-ok' : 'result-error'}">PB: ${pb}m (${pbOk ? 'OK' : 'Te kort'})</div>
      <div class="result-item ${loaOk ? 'result-ok' : 'result-error'}">LOA: ${loa}m (${loaOk ? 'OK' : 'Buiten limiet'})</div>
      <div class="result-item ${sumOk ? 'result-ok' : 'result-error'}">Fwd+Aft Check (${sumDiff.toFixed(2)}m)</div>
    </div>`;

    // Row 2: Hoogtes & Gewicht
    html += `<div class="row-flex">
      <div class="result-item ${fbOk ? 'result-ok' : 'result-error'}">Freeboard: ${freeboard}m</div>
      <div class="result-item ${mfOk ? 'result-ok' : 'result-error'}">Manifold: ${manifold}m</div>
      <div class="result-item ${dwOk ? 'result-ok' : 'result-error'}">DWT: ${deadweight}t</div>
    </div>`;

    // Loading Arms Logic
    html += `<div class="arm-container"><h4>Beschikbaarheid Laadarmen (${side})</h4><div class="arm-row">`;
    
    const armen = (side === 'SB') ? [
      { n: 'Arm 4 (SB)', ok: fwd > 28.35 && aft > 19.68 },
      { n: 'Arm 5 (SB)', ok: fwd > 30.94 && aft > 17.09 },
      { n: 'Arm 7 (SB)', ok: fwd > 36.58 && aft > 11.45 },
      { n: 'Arm 8 (SB)', ok: fwd > 39.17 && aft > 8.86 }
    ] : [
      { n: 'Arm 4 (PS)', ok: fwd > 19.68 && aft > 28.35 },
      { n: 'Arm 5 (PS)', ok: fwd > 17.09 && aft > 30.94 },
      { n: 'Arm 7 (PS)', ok: fwd > 11.45 && aft > 36.58 },
      { n: 'Arm 8 (PS)', ok: fwd > 8.86 && aft > 39.17 }
    ];

    armen.forEach(a => {
      html += `<div class="arm-block ${a.ok ? 'result-ok' : 'result-error'}">${a.n}<br>${a.ok ? 'Bereikbaar' : 'Geen bereik'}</div>`;
    });

    html += `</div></div>`;
    document.getElementById('resultaten').innerHTML = html;
  }
</script>

</body>
</html>
